# create-miniapp-ts

自己在用的小程序结构，使用TypeScript以及less进行开发，做了一些简单的环境配置，之后应该会根据自己的使用感受完善，提升代码体验。

## 一些微小的工作

### 使用

- `git clone`
- `yarn`|`npm i`
- `npm start`
之后，在src文件夹下使用ts以及less进行开发

### 为什么要用ts

因为在做的小程序都比较重，包含大量的数据交互，使用js会出现写着写着不知道数据的格式是什么、类型出现错误等等问题，使用TS可以有效规避这些问题，所以工作中的代码全部在往ts上靠；

### 为什么要造自己的轮子

因为小程序提供的ts脚手架项目其实也就是简单的tsc，点一下编译，执行一下tsc，生成一下js；文件堆积在一起，用起来很不方便；另一方面，小程序这个东西虽然已经有很多轮子做到一份代码，生成多种小程序；但是就目前的占有率来看，以及小程序的API更新速度来看，依赖于第三方总觉得心里不踏实，所以做了一些简单的配置，还是用最基础的方式写小程序；

### 做了哪些微小的工作

- 文件结构的改变

  小程序的页面全部放在`dist/`文件夹下，`src`文件夹用于存放源代码；根据现在的配置，所有的ts文件不能放置在src文件夹外。

- ts的支持

  ts的支持依赖于`miniprogram-api-typings`提供的小程序接口描述

- less的支持

  使用less包进行less->css， 将文件名更改为wxss ...

- omix的使用
  选择了v1版本omix作为默认的状态管理工具；

- 文件监测
  - 对于tsc使用了默认的watch选项
  - 对于less使用，使用chokidar进行文件监测
  - 其他类型文件，使用chokidar，**进行文件复制**；因此，建议把资源文件放置在src文件夹外的assets中进行管理，在dist以及src中能够得的相同的相对路径；

emmm... 就这么简单